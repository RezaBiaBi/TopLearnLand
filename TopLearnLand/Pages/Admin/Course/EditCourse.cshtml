@page "{courseId}"
@model TopLearnLand.Pages.Admin.Course.EditCourseModel
@{
    ViewData["Title"] = "EditCourse";
    Layout = "~/Pages/Shared/_AdminAdvanceLayout.cshtml";
}

<style type="text/css">

    .boxshadow:hover {
        box-shadow: 0px 0px 18px rgba(0, 0, 0, 0.5);
    }

    .boxshadow {
        box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.3);
    }
</style>

<div class="container">
    <h1>EditCourse</h1>
</div>
<hr />
@*@if (ViewData["SuccessUpdate"] as bool ==true)
{
    <script type="text/javascript">
        var delay = 3000;
        document.setTimeout(function () {
            document.window.location = "https://localhost:44376/Admin/Course";
        }, delay);
    </script>

    <div class="alert alert-success">
        <p class="help-block">دوره شما باموفقیت ویرایش شد</p>
    </div>
}*@

<div class="container">
    <div class="row">
        <div class="card boxshadow" style="width: 100%">
            <div class="card-header card-dark card-outline">
                <h3 class="card-title badge badge-secondary">Users Profile</h3>

                <div class="card-tools">
                    <ul class="pagination pagination-sm float-right">
                        <li class="page-item"><a class="page-link" href="#">«</a></li>
                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">»</a></li>
                    </ul>
                </div>
            </div>
            <!-- /.card-header -->
            <div class="card-body p-0">
                <form method="post" role="form" enctype="multipart/form-data">
                    <input type="hidden" asp-for="Course.CourseId" />
                    <input type="hidden" asp-for="Course.RegisterDate" />
                    <input type="hidden" asp-for="Course.CourseImageName" />
                    <input type="hidden" asp-for="Course.CourseDemoName" />
                    <br />
                    <div class="form-row container">
                        <div class="col-sm-8 col-md-8">
                            <div class="form-row container">
                                <div class="form-group col-md-6">
                                    <label>Title</label>
                                    <input type="text" asp-for="Course.CourseTitle" class="form-control boxshadow" placeholder="Title..." />
                                </div>
                                <div class="form-group col-md-6">
                                    <label>Course Group</label>
                                    <select id="Course_GroupId" asp-for="Course.CourseGroupId" asp-items="@(ViewData["Groups"] as SelectList)" class="form-control boxshadow"></select>
                                </div>
                            </div>
                            <div class="form-row container">
                                <div class="form-group col-md-6">
                                    <label>Teacher</label>
                                    <select asp-for="Course.TeacherId" asp-items="@(ViewData["Teachers"] as SelectList)" class="form-control boxshadow"></select>
                                </div>
                                <div class="form-group col-md-6">
                                    <label>Sub Group</label>
                                    <select id="Course_CourseSubGroupId" asp-for="Course.CourseSubGroupId" asp-items="@(ViewData["SubGroups"] as SelectList)" class="form-control boxshadow"></select>
                                </div>
                            </div>
                            <hr />
                            <div class="form-row container">
                                <div class="form-group col-md-12">
                                    <label>Description</label>
                                    <textarea id="Course_CourseDescription" asp-for="Course.Description" class="form-control boxshadow" placeholder="Course Description..." style="min-height: 100px"></textarea>
                                </div>
                            </div>
                            <hr />
                            <div class="form-row container">
                                <div class="form-group col-md-5">
                                    <input asp-for="Course.CourseTags" class="form-control boxshadow" placeholder="Tags..." />
                                </div>
                                <div class="form-group col-md-4">
                                    <div class="custom-file boxshadow" style="margin-top: 0px;">
                                        <input type="file" asp-for="Course.CourseDemoName" class="custom-file-input" name="courseDemoUp" id="customFile">
                                        <label class="custom-file-label" for="customFile">Course Demo</label>
                                    </div>
                                </div>
                                <div class="form-group col-md-3">
                                    <input type="number" asp-for="Course.CoursePrice" class="form-control boxshadow" placeholder="Price..." />
                                </div>
                            </div>
                        </div>
                        <div class="row col-sm-4 col-md-4" style="margin-bottom: 15px; margin-left: 5px; padding-left: 25px; border-left: 1px solid rgba(0, 0, 0, 0.3)">
                            <div class="form-row container">
                                <div class="col-sm-12 col-md-12">
                                    <div class="col-sm-12 col-md-12">
                                        <img id="imgCourse" class="thumbnail rounded boxshadow" src="/Courses/Images/@Model.Course.CourseImageName" style="max-height: 300px; max-width: 300px" />
                                    </div>
                                    <div class="form-group">
                                        <div class="custom-file boxshadow col-md-12" style="margin-top: 2px;">
                                            <input type="file" asp-for="Course.CourseImageName" class="custom-file-input" name="courseImageUp" id="CourseImageFile">
                                            <label class="custom-file-label" for="customFile">Course Image</label>
                                        </div>
                                    </div>
                                </div>
                                <hr />
                                <div class="form-row container" style="border-top: 1px solid rgba(0, 0, 0, 0.3); padding-top: 15px; margin-top: -15px; margin-bottom: 7px">
                                    <div class="col-sm-12 col-md-12">
                                        <div class="form-group col-md-12">
                                            <label>Course Status</label>
                                            <select asp-for="Course.CourseStatusId" asp-items="@(ViewData["CourseStatus"] as SelectList)" class="form-control boxshadow"></select>
                                        </div>
                                        <div class="form-group col-md-12">
                                            <label>Course Level</label>
                                            <select asp-for="Course.CourseLevelId" asp-items="@(ViewData["CourseLevel"] as SelectList)" class="form-control boxshadow"></select>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-row container" style="border-top: 1px solid rgba(0, 0, 0, 0.3); padding-top: 15px; margin-top: -30px; margin-bottom: 7px">
                                    <div class="col-md-12">
                                        <input type="submit" value="Save Course" class="btn btn-block btn-success boxshadow" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br />
                        <br />
                    </div>
                </form>
            </div>
            <!-- /.card-body -->
        </div>
    </div>
</div>




@section Scripts
{
    <script type="text/javascript">

        $("#Course_GroupId").change(function () {
            $("#Course_CourseSubGroupId").empty();
            $.getJSON("/home/GetSubGroups/" + $("#Course_GroupId :selected").val(),
                function (data) {
                    $.each(data,
                        function () {
                            $("#Course_CourseSubGroupId").append('<option value=' + this.value + '>' + this.text + '</option>');
                        });
                });
        });

        //$('#Course_GroupId').change(function () {
        //    $("#Course_Subgroup").empty();
        //    $.ajax({
        //        url: "/Home/GetSubGroups/" + $('#Course_GroupId:selected').val(),
        //        success: function (data) {
        //            $.each(data, function () {
        //                $('#Course_SubGroup').append('<option value=' + this.value + '>' + this.text + '</option>');
        //            });
        //        }
        //    });
        //});


        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#imgCourse').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]); // convert to base64 string
            }
        }

        $("#CourseImageFile").change(function () {
            readURL(this);
        });

        //$("#EditUserForm").submit(function (event) {
        //    event.preventDefault();
        //    var form = $(this);
        //    form.find(".result").html("").fadeIn();
        //    $.ajax(
        //        {
        //            type: form.attr('method'),
        //            url: form.attr('action'),
        //            data: form.serialize()
        //        }), function (response) {
        //            form.find(".result").html(response).delay(3000).fadeOut();
        //        };
        //});
    </script>
    <script src="https://cdn.ckeditor.com/4.9.2/standard/ckeditor.js"></script>
    <script>

        CKEDITOR.replace('Course_CourseDescription',
            {
                customConfig: '/js/Config.js'
            });
    </script>
}
